#!/usr/bin/env bash
set -euo pipefail

INSTALL_DIR="{{ .chezmoi.sourceDir }}/../install"
source "$INSTALL_DIR/common/functions.sh"

echo "=== Testing chezmoi scripts on {{ .chezmoi.os }} ==="
echo "Hostname: {{ .chezmoi.hostname }}"
echo "Username: {{ .chezmoi.username }}"
echo "Install directory: $INSTALL_DIR"

{{- if eq .chezmoi.os "darwin" }}
echo "OS: macOS ({{ .chezmoi.os }})"
echo "Architecture: $(uname -m)"
{{- else if eq .chezmoi.os "linux" }}
echo "OS: Linux ({{ .chezmoi.os }})"
{{- if .chezmoi.osRelease.id }}
echo "Distribution: {{ .chezmoi.osRelease.id }}"
{{- end }}
{{- end }}

echo "âœ“ Test completed"